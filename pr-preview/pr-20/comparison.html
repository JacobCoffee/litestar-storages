<!DOCTYPE html>
<html lang="en" data-accent-color="violet" data-content_root="./">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Comparison with Other Libraries - litestar-storages</title><link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Changelog" href="changelog.html" /><link rel="prev" title="DTOs" href="api/contrib/dto.html" /><script>
    function setColorMode(t){let e=document.documentElement;e.setAttribute("data-color-mode",t);let a=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,s=t;"auto"===t&&(s=a?"dark":"light"),"light"===s?(e.classList.remove("dark"),e.classList.add("light")):(e.classList.remove("light"),e.classList.add("dark"))}
    setColorMode(localStorage._theme||"auto");
  </script><link rel="stylesheet" type="text/css" href="_static/pygments.css?v=e1a1ceaf" />
    <link rel="stylesheet" type="text/css" href="_static/shibuya.css?v=14737038" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
    <link media="print" rel="stylesheet" type="text/css" href="_static/print.css?v=20ff2c19" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=5f8f7e8c" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --sy-f-text: "Inter", var(--sy-f-sys), var(--sy-f-cjk), sans-serif;
  --sy-f-heading: "Inter", var(--sy-f-sys), var(--sy-f-cjk), sans-serif;
}
</style>
    <meta property="og:type" content="website"/><meta property="og:title" content="Comparison with Other Libraries"/>
    <meta name="twitter:card" content="summary"/>
  </head>
<body><div class="sy-head">
  <div class="sy-head-blur"></div>
  <div class="sy-head-inner sy-container mx-auto">
    <a class="sy-head-brand" href="index.html">
      
      
      <strong>litestar-storages</strong>
    </a>
    <div class="sy-head-nav" id="head-nav">
      <nav class="sy-head-links"><ul><li class="link">
          <a href="https://litestar.dev/">
            <span>Litestar</span></a>
        </li><li class="link">
          <a href="https://pypi.org/project/litestar-storages/">
            <span>PyPI</span></a>
        </li></ul></nav>
      <div class="sy-head-extra flex items-center print:hidden"><form class="searchbox flex items-center" action="search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <kbd>/</kbd>
</form><div class="sy-head-socials">
  <a href="https://github.com/JacobCoffee/litestar-storages" aria-label="GitHub">
    <iconify-icon icon="simple-icons:github"></iconify-icon>
  </a></div></div>
    </div>
    <div class="sy-head-actions flex items-center shrink-0 print:hidden"><button class="js-theme theme-switch flex items-center"
data-aria-auto="Switch to light color mode"
data-aria-light="Switch to dark color mode"
data-aria-dark="Switch to auto color mode">
<i class="i-lucide theme-icon"></i>
</button><button class="md:hidden flex items-center js-menu" aria-label="Menu" type="button" aria-controls="head-nav" aria-expanded="false">
        <div class="hamburger">
          <span class="hamburger_1"></span>
          <span class="hamburger_2"></span>
          <span class="hamburger_3"></span>
        </div>
      </button>
    </div>
  </div>
</div>
<div class="sy-page sy-container flex mx-auto">
  <aside id="lside" class="sy-lside md:w-72 md:shrink-0 print:hidden">
    <div class="sy-lside-inner md:sticky">
      <div class="sy-scrollbar p-6">
        <div class="globaltoc" data-expand-depth="0"><p class="caption" role="heading" aria-level="3"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Example Applications</a></li>
</ul>
<p class="caption" role="heading" aria-level="3"><span class="caption-text">Storage Backends</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="backends/filesystem.html">FileSystem Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="backends/s3.html">S3 Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="backends/gcs.html">GCS Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="backends/azure.html">Azure Blob Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="backends/memory.html">Memory Storage</a></li>
</ul>
<p class="caption" role="heading" aria-level="3"><span class="caption-text">Advanced Topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="advanced/retry.html">Retry Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced/multipart-uploads.html">Multipart Uploads</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced/progress-callbacks.html">Progress Callbacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced/custom-backends.html">Custom Backends</a></li>
</ul>
<p class="caption" role="heading" aria-level="3"><span class="caption-text">Cookbook</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cookbook/index.html">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="cookbook/file-upload-validation.html">File Upload with Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="cookbook/image-processing-pipeline.html">Image Processing Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="cookbook/multi-backend-config.html">Multi-Backend Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="cookbook/streaming-large-files.html">Streaming Large Files</a></li>
</ul>
<p class="caption" role="heading" aria-level="3"><span class="caption-text">Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="api/index.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api/base.html">Base Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/types.html">Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/exceptions.html">Exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/backends/index.html">Storage Backends</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/backends/memory.html">Memory Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/backends/filesystem.html">FileSystem Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/backends/s3.html">S3 Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/backends/gcs.html">GCS Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/backends/azure.html">Azure Storage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/contrib/index.html">Litestar Integration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/contrib/plugin.html">Storage Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/contrib/dependencies.html">Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/contrib/dto.html">DTOs</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Comparison with Other Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </div>
  </aside>
  <div class="lside-overlay js-menu" role="button" aria-label="Close left sidebar" aria-controls="lside" aria-expanded="false"></div>
  <aside id="rside" class="sy-rside pb-3 w-64 shrink-0 order-last">
    <button class="rside-close js-menu xl:hidden" aria-label="Close Table of Contents" type="button" aria-controls="rside" aria-expanded="false">
      <i class="i-lucide close"></i>
    </button>
    <div class="sy-scrollbar sy-rside-inner px-6 xl:top-16 xl:sticky xl:pl-0 pt-6 pb-4"><div class="localtoc"><h3>On this page</h3><ul>
<li><a class="reference internal" href="#library-overview">Library Overview</a></li>
<li><a class="reference internal" href="#architecture-comparison">Architecture Comparison</a><ul>
<li><a class="reference internal" href="#sync-vs-async-why-it-matters">Sync vs Async: Why It Matters</a></li>
<li><a class="reference internal" href="#design-philosophy">Design Philosophy</a></li>
</ul>
</li>
<li><a class="reference internal" href="#feature-comparison-matrix">Feature Comparison Matrix</a><ul>
<li><a class="reference internal" href="#core-operations">Core Operations</a></li>
<li><a class="reference internal" href="#advanced-features">Advanced Features</a></li>
<li><a class="reference internal" href="#backend-support">Backend Support</a></li>
<li><a class="reference internal" href="#framework-integration">Framework Integration</a></li>
<li><a class="reference internal" href="#exception-handling">Exception Handling</a></li>
</ul>
</li>
<li><a class="reference internal" href="#litestar-storages-advantages">litestar-storages Advantages</a></li>
<li><a class="reference internal" href="#when-to-choose-each-library">When to Choose Each Library</a><ul>
<li><a class="reference internal" href="#choose-litestar-storages-when">Choose litestar-storages when:</a></li>
<li><a class="reference internal" href="#choose-fastapi-storages-when">Choose fastapi-storages when:</a></li>
<li><a class="reference internal" href="#choose-django-storages-when">Choose django-storages when:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#migration-guide">Migration Guide</a><ul>
<li><a class="reference internal" href="#migrating-from-django-storages">Migrating from django-storages</a></li>
<li><a class="reference internal" href="#migrating-from-fastapi-storages">Migrating from fastapi-storages</a></li>
</ul>
</li>
<li><a class="reference internal" href="#performance-considerations">Performance Considerations</a><ul>
<li><a class="reference internal" href="#async-performance-benefits">Async Performance Benefits</a></li>
<li><a class="reference internal" href="#connection-pooling">Connection Pooling</a></li>
<li><a class="reference internal" href="#streaming-for-large-files">Streaming for Large Files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</div><div id="ethical-ad-placement" data-ea-publisher="readthedocs"></div></div>
  </aside>
  <div class="rside-overlay js-menu" role="button" aria-label="Close Table of Contents" aria-controls="rside" aria-expanded="false"></div>
  <main class="sy-main w-full max-sm:max-w-full print:pt-6">
<div class="sy-breadcrumbs" role="navigation">
  <div class="sy-breadcrumbs-inner flex items-center">
    <div class="md:hidden mr-3">
      <button class="js-menu" aria-label="Menu" type="button" aria-controls="lside" aria-expanded="false">
        <i class="i-lucide menu"></i>
      </button>
    </div>
    <ol class="flex-1" itemscope itemtype="https://schema.org/BreadcrumbList"><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="index.html"><span itemprop="name">litestar-storages</span></a>
        <span>/</span>
        <meta itemprop="position" content="1" />
      </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <strong itemprop="name">Comparison with Other Libraries</strong>
        <meta itemprop="position" content="2" />
      </li></ol>
    <div class="xl:hidden ml-1">
      <button class="js-menu" aria-label="Show table of contents" type="button" aria-controls="rside"
        aria-expanded="false">
        <i class="i-lucide outdent"></i>
      </button>
    </div>
  </div>
</div><div class="flex flex-col break-words justify-between">
      <div class="min-w-0 max-w-6xl px-6 pb-6 pt-8 xl:px-12">
        <article class="yue" role="main">
          <section id="comparison-with-other-libraries">
<h1>Comparison with Other Libraries<a class="headerlink" href="#comparison-with-other-libraries" title="Link to this heading">¶</a></h1>
<p>When choosing a file storage library for your Python web application, you have several options.
This guide compares litestar-storages with the most popular alternatives: django-storages and
fastapi-storages. Understanding these differences will help you make an informed decision for
your project.</p>
<section id="library-overview">
<h2>Library Overview<a class="headerlink" href="#library-overview" title="Link to this heading">¶</a></h2>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 25.0%" />
<col style="width: 25.0%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>litestar-storages</p></th>
<th class="head"><p>fastapi-storages</p></th>
<th class="head"><p>django-storages</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Latest Version</p></td>
<td><p>0.1.0</p></td>
<td><p>0.3.0 (Feb 2024)</p></td>
<td><p>1.14.6 (April 2025)</p></td>
</tr>
<tr class="row-odd"><td><p>GitHub Stars</p></td>
<td><p>New project</p></td>
<td><p>~98</p></td>
<td><p>~2,900</p></td>
</tr>
<tr class="row-even"><td><p>PyPI Downloads</p></td>
<td><p>New project</p></td>
<td><p>~21k/month</p></td>
<td><p>Very high (mature)</p></td>
</tr>
<tr class="row-odd"><td><p>Framework</p></td>
<td><p>Framework-agnostic (Litestar plugin available)</p></td>
<td><p>FastAPI (via ORM types)</p></td>
<td><p>Django only</p></td>
</tr>
<tr class="row-even"><td><p>Maintenance Status</p></td>
<td><p>Active development</p></td>
<td><p>Low activity</p></td>
<td><p>Active</p></td>
</tr>
<tr class="row-odd"><td><p>License</p></td>
<td><p>MIT</p></td>
<td><p>MIT</p></td>
<td><p>BSD</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="architecture-comparison">
<h2>Architecture Comparison<a class="headerlink" href="#architecture-comparison" title="Link to this heading">¶</a></h2>
<section id="sync-vs-async-why-it-matters">
<h3>Sync vs Async: Why It Matters<a class="headerlink" href="#sync-vs-async-why-it-matters" title="Link to this heading">¶</a></h3>
<p>The most significant architectural difference between these libraries is their approach to
asynchronous I/O. Both django-storages and fastapi-storages are <strong>synchronous</strong>, while
litestar-storages is <strong>async-native</strong>.</p>
<p><strong>Why async matters for file storage:</strong></p>
<ol class="arabic simple">
<li><p><strong>Non-blocking I/O</strong>: File operations, especially to cloud storage, involve network I/O.
Synchronous operations block your entire application thread while waiting for responses.
Async operations allow other requests to be processed during this wait time.</p></li>
<li><p><strong>Concurrency</strong>: A single async application can handle many concurrent file uploads/downloads
without spawning additional threads or processes. This is particularly important for
real-time applications and high-throughput scenarios.</p></li>
<li><p><strong>Memory efficiency</strong>: Async streaming allows processing large files chunk-by-chunk without
loading the entire file into memory, which is critical for handling large uploads.</p></li>
<li><p><strong>Modern Python</strong>: The Python ecosystem is moving toward async-first designs. Libraries like
FastAPI, Litestar, and Starlette are async-native, and using sync storage operations with
them creates bottlenecks.</p></li>
</ol>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">litestar-storages (async-native)</span><a class="headerlink" href="#id1" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="c1"># Non-blocking file operations</span>
</span><span data-line="2"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">upload_file</span><span class="p">(</span><span class="n">storage</span><span class="p">:</span> <span class="n">Storage</span><span class="p">,</span> <span class="n">file</span><span class="p">:</span> <span class="n">UploadFile</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StoredFile</span><span class="p">:</span>
</span><span data-line="3">    <span class="c1"># This doesn&#39;t block the event loop</span>
</span><span data-line="4">    <span class="k">return</span> <span class="k">await</span> <span class="n">storage</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
</span><span data-line="5">        <span class="n">key</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span>
</span><span data-line="6">        <span class="n">data</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">file</span><span class="p">,</span>  <span class="c1"># Async streaming</span>
</span><span data-line="7">        <span class="n">content_type</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">content_type</span><span class="p">,</span>
</span><span data-line="8">    <span class="p">)</span>
</span><span data-line="9">
</span><span data-line="10"><span class="c1"># Stream large files without memory overhead</span>
</span><span data-line="11"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">download_file</span><span class="p">(</span><span class="n">storage</span><span class="p">:</span> <span class="n">Storage</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncIterator</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]:</span>
</span><span data-line="12">    <span class="k">async</span> <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">storage</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
</span><span data-line="13">        <span class="k">yield</span> <span class="n">chunk</span>  <span class="c1"># Memory-efficient streaming</span>
</span></pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">django-storages / fastapi-storages (sync)</span><a class="headerlink" href="#id2" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="c1"># Blocks the thread while waiting for S3</span>
</span><span data-line="2"><span class="k">def</span><span class="w"> </span><span class="nf">upload_file</span><span class="p">(</span><span class="n">storage</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span data-line="3">    <span class="c1"># Thread blocked during entire network operation</span>
</span><span data-line="4">    <span class="k">return</span> <span class="n">storage</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>
</span><span data-line="5">
</span><span data-line="6"><span class="c1"># May load entire file into memory</span>
</span><span data-line="7"><span class="k">def</span><span class="w"> </span><span class="nf">download_file</span><span class="p">(</span><span class="n">storage</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
</span><span data-line="8">    <span class="k">with</span> <span class="n">storage</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span data-line="9">        <span class="k">return</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>  <span class="c1"># Entire file in memory</span>
</span></pre></div>
</div>
</div>
</section>
<section id="design-philosophy">
<h3>Design Philosophy<a class="headerlink" href="#design-philosophy" title="Link to this heading">¶</a></h3>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 25.0%" />
<col style="width: 25.0%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Aspect</p></th>
<th class="head"><p>litestar-storages</p></th>
<th class="head"><p>fastapi-storages</p></th>
<th class="head"><p>django-storages</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>API Design</p></td>
<td><p>Protocol-based (duck typing)</p></td>
<td><p>Class inheritance</p></td>
<td><p>Django File API</p></td>
</tr>
<tr class="row-odd"><td><p>Configuration</p></td>
<td><p>Dataclass configs</p></td>
<td><p>Constructor args</p></td>
<td><p>Django settings</p></td>
</tr>
<tr class="row-even"><td><p>Error Handling</p></td>
<td><p>Typed exception hierarchy</p></td>
<td><p>SDK exceptions</p></td>
<td><p>SDK exceptions</p></td>
</tr>
<tr class="row-odd"><td><p>Testing Story</p></td>
<td><p>In-memory backend</p></td>
<td><p>Mock SDK</p></td>
<td><p>Mock Django storage</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="feature-comparison-matrix">
<h2>Feature Comparison Matrix<a class="headerlink" href="#feature-comparison-matrix" title="Link to this heading">¶</a></h2>
<section id="core-operations">
<h3>Core Operations<a class="headerlink" href="#core-operations" title="Link to this heading">¶</a></h3>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 20.0%" />
<col style="width: 20.0%" />
<col style="width: 20.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operation</p></th>
<th class="head"><p>Method</p></th>
<th class="head"><p>litestar-storages</p></th>
<th class="head"><p>fastapi-storages</p></th>
<th class="head"><p>django-storages</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Store file</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">put</span></code> / <code class="docutils literal notranslate"><span class="pre">save</span></code></p></td>
<td><p>Yes Async</p></td>
<td><p>Yes Sync</p></td>
<td><p>Yes Sync</p></td>
</tr>
<tr class="row-odd"><td><p>Retrieve file</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">get</span></code> / <code class="docutils literal notranslate"><span class="pre">open</span></code></p></td>
<td><p>Yes Async streaming</p></td>
<td><p>Yes Sync</p></td>
<td><p>Yes Sync</p></td>
</tr>
<tr class="row-even"><td><p>Delete file</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">delete</span></code></p></td>
<td><p>Yes Async</p></td>
<td><p>Yes Sync</p></td>
<td><p>Yes Sync</p></td>
</tr>
<tr class="row-odd"><td><p>Check existence</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">exists</span></code></p></td>
<td><p>Yes Async</p></td>
<td><p>No</p></td>
<td><p>Yes Sync</p></td>
</tr>
<tr class="row-even"><td><p>List files</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">list</span></code> / <code class="docutils literal notranslate"><span class="pre">listdir</span></code></p></td>
<td><p>Yes Async iterator</p></td>
<td><p>No</p></td>
<td><p>Yes Sync (some backends)</p></td>
</tr>
<tr class="row-odd"><td><p>Get URL</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">url</span></code></p></td>
<td><p>Yes Presigned URLs</p></td>
<td><p>No</p></td>
<td><p>Yes Sync</p></td>
</tr>
<tr class="row-even"><td><p>Copy file</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">copy</span></code></p></td>
<td><p>Yes Async</p></td>
<td><p>No</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p>Move file</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">move</span></code></p></td>
<td><p>Yes Async</p></td>
<td><p>No</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p>File info/metadata</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">info</span></code></p></td>
<td><p>Yes StoredFile dataclass</p></td>
<td><p>No</p></td>
<td><p>Partial Via file object</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="advanced-features">
<h3>Advanced Features<a class="headerlink" href="#advanced-features" title="Link to this heading">¶</a></h3>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 20.0%" />
<col style="width: 20.0%" />
<col style="width: 30.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Feature</p></th>
<th class="head"><p>litestar-storages</p></th>
<th class="head"><p>fastapi-storages</p></th>
<th class="head"><p>django-storages</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Multipart Upload</strong></p></td>
<td><p>Yes Explicit API (start/upload_part/complete/abort)</p></td>
<td><p>No</p></td>
<td><p>Partial Implicit (S3 only, via boto3 TransferConfig)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Progress Callbacks</strong></p></td>
<td><p>Yes ProgressInfo dataclass with percentage, speed, ETA</p></td>
<td><p>No</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p><strong>Retry Logic</strong></p></td>
<td><p>Yes RetryConfig with exponential backoff + jitter</p></td>
<td><p>No</p></td>
<td><p>Partial SDK defaults only</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Streaming Upload</strong></p></td>
<td><p>Yes AsyncIterator/AsyncGenerator support</p></td>
<td><p>No</p></td>
<td><p>Partial ChunkedUpload for some backends</p></td>
</tr>
<tr class="row-even"><td><p><strong>Streaming Download</strong></p></td>
<td><p>Yes AsyncIterator yielding chunks</p></td>
<td><p>No</p></td>
<td><p>Partial Temp files for large downloads</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Custom Metadata</strong></p></td>
<td><p>Yes Dict passed to put()</p></td>
<td><p>No</p></td>
<td><p>Partial Backend-dependent</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="backend-support">
<h3>Backend Support<a class="headerlink" href="#backend-support" title="Link to this heading">¶</a></h3>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 25.0%" />
<col style="width: 25.0%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Backend</p></th>
<th class="head"><p>litestar-storages</p></th>
<th class="head"><p>fastapi-storages</p></th>
<th class="head"><p>django-storages</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Local Filesystem</strong></p></td>
<td><p>Yes FileSystemStorage</p></td>
<td><p>Yes FileSystemStorage</p></td>
<td><p>Yes FileSystemStorage</p></td>
</tr>
<tr class="row-odd"><td><p><strong>In-Memory</strong></p></td>
<td><p>Yes MemoryStorage</p></td>
<td><p>No</p></td>
<td><p>No (Django’s InMemoryStorage is for testing)</p></td>
</tr>
<tr class="row-even"><td><p><strong>Amazon S3</strong></p></td>
<td><p>Yes S3Storage (aioboto3)</p></td>
<td><p>Yes S3Storage (boto3)</p></td>
<td><p>Yes S3Boto3Storage (boto3)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>S3-Compatible</strong></p></td>
<td><p>Yes R2, Spaces, MinIO, B2</p></td>
<td><p>Yes Basic support</p></td>
<td><p>Yes Via endpoint_url</p></td>
</tr>
<tr class="row-even"><td><p><strong>Google Cloud Storage</strong></p></td>
<td><p>Yes GCSStorage (aiohttp)</p></td>
<td><p>No</p></td>
<td><p>Yes GoogleCloudStorage</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Azure Blob Storage</strong></p></td>
<td><p>Yes AzureStorage (aiohttp)</p></td>
<td><p>No</p></td>
<td><p>Yes AzureStorage</p></td>
</tr>
<tr class="row-even"><td><p><strong>Dropbox</strong></p></td>
<td><p>No</p></td>
<td><p>No</p></td>
<td><p>Yes DropBoxStorage</p></td>
</tr>
<tr class="row-odd"><td><p><strong>SFTP/FTP</strong></p></td>
<td><p>No</p></td>
<td><p>No</p></td>
<td><p>Yes SFTPStorage, FTPStorage</p></td>
</tr>
<tr class="row-even"><td><p><strong>Apache Libcloud</strong></p></td>
<td><p>No</p></td>
<td><p>No</p></td>
<td><p>Yes LibCloudStorage</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="framework-integration">
<h3>Framework Integration<a class="headerlink" href="#framework-integration" title="Link to this heading">¶</a></h3>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 20.0%" />
<col style="width: 20.0%" />
<col style="width: 30.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Feature</p></th>
<th class="head"><p>litestar-storages</p></th>
<th class="head"><p>fastapi-storages</p></th>
<th class="head"><p>django-storages</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Dependency Injection</strong></p></td>
<td><p>Yes StoragePlugin with Provide()</p></td>
<td><p>Partial Manual FastAPI Depends</p></td>
<td><p>Yes Django settings DEFAULT_FILE_STORAGE</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Lifespan Management</strong></p></td>
<td><p>Yes Auto-cleanup on shutdown</p></td>
<td><p>No</p></td>
<td><p>Yes Django manages</p></td>
</tr>
<tr class="row-even"><td><p><strong>Multiple Storages</strong></p></td>
<td><p>Yes Named storages via plugin</p></td>
<td><p>Partial Manual setup</p></td>
<td><p>Yes STORAGES dict (Django 4.2+)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>ORM Integration</strong></p></td>
<td><p>No (Use Litestar types)</p></td>
<td><p>Yes SQLAlchemy FileType</p></td>
<td><p>Yes FileField, ImageField</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="exception-handling">
<h3>Exception Handling<a class="headerlink" href="#exception-handling" title="Link to this heading">¶</a></h3>
<p>litestar-storages provides a comprehensive exception hierarchy to handle storage errors
consistently across all backends:</p>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 35.0%" />
<col style="width: 65.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Exception</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">StorageError</span></code></p></td>
<td><p>Base exception for all storage errors</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">StorageFileNotFoundError</span></code></p></td>
<td><p>File does not exist (key not found)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">StoragePermissionError</span></code></p></td>
<td><p>Access denied (authentication/authorization failure)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">StorageConnectionError</span></code></p></td>
<td><p>Network or connection issues</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">StorageConfigurationError</span></code></p></td>
<td><p>Invalid configuration (missing credentials, bad bucket name)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">StorageQuotaExceededError</span></code></p></td>
<td><p>Storage limit reached</p></td>
</tr>
</tbody>
</table>
</div>
<p>Both fastapi-storages and django-storages expose underlying SDK exceptions (botocore exceptions,
Azure exceptions, etc.), requiring backend-specific error handling.</p>
</section>
</section>
<section id="litestar-storages-advantages">
<h2>litestar-storages Advantages<a class="headerlink" href="#litestar-storages-advantages" title="Link to this heading">¶</a></h2>
<p><strong>1. Async-Native Design</strong></p>
<p>Built from the ground up with <code class="docutils literal notranslate"><span class="pre">async/await</span></code>. Uses aioboto3 for S3, aiohttp for GCS/Azure,
and aiofiles for filesystem operations. No thread pool executors or sync-to-async wrappers.</p>
<p><strong>2. Five Production-Ready Backends</strong></p>
<p>Memory, Filesystem, S3, Azure, and GCS backends all implement the same protocol. fastapi-storages
only offers 2 backends (Filesystem, S3). While django-storages has more backends (7+), they are
all synchronous.</p>
<p><strong>3. Explicit Multipart Upload API</strong></p>
<p>For large files, litestar-storages provides a clear multipart upload workflow:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="c1"># Start multipart upload</span>
</span><span data-line="2"><span class="n">upload</span> <span class="o">=</span> <span class="k">await</span> <span class="n">storage</span><span class="o">.</span><span class="n">start_multipart_upload</span><span class="p">(</span><span class="s2">&quot;large-file.zip&quot;</span><span class="p">)</span>
</span><span data-line="3">
</span><span data-line="4"><span class="c1"># Upload parts (can be parallelized)</span>
</span><span data-line="5"><span class="n">parts</span> <span class="o">=</span> <span class="p">[]</span>
</span><span data-line="6"><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">chunks</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
</span><span data-line="7">    <span class="n">part</span> <span class="o">=</span> <span class="k">await</span> <span class="n">storage</span><span class="o">.</span><span class="n">upload_part</span><span class="p">(</span><span class="n">upload</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">chunk</span><span class="p">)</span>
</span><span data-line="8">    <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>
</span><span data-line="9">
</span><span data-line="10"><span class="c1"># Complete upload</span>
</span><span data-line="11"><span class="k">await</span> <span class="n">storage</span><span class="o">.</span><span class="n">complete_multipart_upload</span><span class="p">(</span><span class="n">upload</span><span class="p">,</span> <span class="n">parts</span><span class="p">)</span>
</span><span data-line="12">
</span><span data-line="13"><span class="c1"># Or abort if something goes wrong</span>
</span><span data-line="14"><span class="k">await</span> <span class="n">storage</span><span class="o">.</span><span class="n">abort_multipart_upload</span><span class="p">(</span><span class="n">upload</span><span class="p">)</span>
</span></pre></div>
</div>
<p><strong>4. Progress Callbacks</strong></p>
<p>Track upload/download progress with detailed information:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="k">def</span><span class="w"> </span><span class="nf">on_progress</span><span class="p">(</span><span class="n">info</span><span class="p">:</span> <span class="n">ProgressInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span data-line="2">    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">info</span><span class="o">.</span><span class="n">percentage</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">% - </span><span class="si">{</span><span class="n">info</span><span class="o">.</span><span class="n">bytes_per_second</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">1024</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> KB/s&quot;</span><span class="p">)</span>
</span><span data-line="3">
</span><span data-line="4"><span class="k">await</span> <span class="n">storage</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
</span><span data-line="5">    <span class="s2">&quot;video.mp4&quot;</span><span class="p">,</span>
</span><span data-line="6">    <span class="n">data</span><span class="p">,</span>
</span><span data-line="7">    <span class="n">progress_callback</span><span class="o">=</span><span class="n">on_progress</span><span class="p">,</span>
</span><span data-line="8"><span class="p">)</span>
</span></pre></div>
</div>
<p><strong>5. Configurable Retry Logic</strong></p>
<p>Automatic retries with exponential backoff and jitter:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar_storages</span><span class="w"> </span><span class="kn">import</span> <span class="n">RetryConfig</span>
</span><span data-line="2">
</span><span data-line="3"><span class="n">storage</span> <span class="o">=</span> <span class="n">S3Storage</span><span class="p">(</span>
</span><span data-line="4">    <span class="n">config</span><span class="o">=</span><span class="n">S3Config</span><span class="p">(</span><span class="n">bucket</span><span class="o">=</span><span class="s2">&quot;my-bucket&quot;</span><span class="p">),</span>
</span><span data-line="5">    <span class="n">retry_config</span><span class="o">=</span><span class="n">RetryConfig</span><span class="p">(</span>
</span><span data-line="6">        <span class="n">max_attempts</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
</span><span data-line="7">        <span class="n">base_delay</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
</span><span data-line="8">        <span class="n">max_delay</span><span class="o">=</span><span class="mf">30.0</span><span class="p">,</span>
</span><span data-line="9">        <span class="n">exponential_base</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span>
</span><span data-line="10">        <span class="n">jitter</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span data-line="11">    <span class="p">),</span>
</span><span data-line="12"><span class="p">)</span>
</span></pre></div>
</div>
<p><strong>6. Protocol-Based Design</strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">Storage</span></code> protocol uses <code class="docutils literal notranslate"><span class="pre">&#64;runtime_checkable</span></code> for duck typing. No inheritance required
for custom backends:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar_storages</span><span class="w"> </span><span class="kn">import</span> <span class="n">Storage</span>
</span><span data-line="2">
</span><span data-line="3"><span class="c1"># Your custom backend just needs to implement the protocol</span>
</span><span data-line="4"><span class="k">class</span><span class="w"> </span><span class="nc">MyCustomStorage</span><span class="p">:</span>
</span><span data-line="5">    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StoredFile</span><span class="p">:</span> <span class="o">...</span>
</span><span data-line="6">    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncIterator</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]:</span> <span class="o">...</span>
</span><span data-line="7">    <span class="c1"># ... other methods</span>
</span><span data-line="8">
</span><span data-line="9"><span class="c1"># Type checking works</span>
</span><span data-line="10"><span class="k">def</span><span class="w"> </span><span class="nf">use_storage</span><span class="p">(</span><span class="n">storage</span><span class="p">:</span> <span class="n">Storage</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span data-line="11">    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">storage</span><span class="p">,</span> <span class="n">Storage</span><span class="p">)</span>  <span class="c1"># Runtime check works too</span>
</span></pre></div>
</div>
<p><strong>7. Framework-Agnostic Core</strong></p>
<p>The core storage classes work without Litestar. The <code class="docutils literal notranslate"><span class="pre">StoragePlugin</span></code> is optional and only
needed for Litestar integration. Use litestar-storages with FastAPI, Starlette, or plain
Python async code.</p>
<p><strong>8. In-Memory Backend for Testing</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">MemoryStorage</span></code> makes testing trivial without mocking:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
</span><span data-line="2"><span class="k">def</span><span class="w"> </span><span class="nf">storage</span><span class="p">():</span>
</span><span data-line="3">    <span class="k">return</span> <span class="n">MemoryStorage</span><span class="p">()</span>
</span><span data-line="4">
</span><span data-line="5"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_upload</span><span class="p">(</span><span class="n">storage</span><span class="p">):</span>
</span><span data-line="6">    <span class="k">await</span> <span class="n">storage</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;test.txt&quot;</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;content&quot;</span><span class="p">)</span>
</span><span data-line="7">    <span class="k">assert</span> <span class="k">await</span> <span class="n">storage</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;test.txt&quot;</span><span class="p">)</span>
</span></pre></div>
</div>
<p><strong>9. Comprehensive Exception Hierarchy</strong></p>
<p>Handle errors consistently across all backends without catching backend-specific exceptions.</p>
</section>
<section id="when-to-choose-each-library">
<h2>When to Choose Each Library<a class="headerlink" href="#when-to-choose-each-library" title="Link to this heading">¶</a></h2>
<section id="choose-litestar-storages-when">
<h3>Choose litestar-storages when:<a class="headerlink" href="#choose-litestar-storages-when" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>You are building an <strong>async-first application</strong> (Litestar, FastAPI, Starlette, aiohttp)</p></li>
<li><p>You need <strong>progress tracking</strong> for file transfers</p></li>
<li><p>You want <strong>explicit control over multipart uploads</strong></p></li>
<li><p>You need to handle <strong>large files with streaming</strong></p></li>
<li><p>You value <strong>testability</strong> with in-memory storage</p></li>
<li><p>You want a <strong>consistent API</strong> across S3, Azure, GCS, and local storage</p></li>
<li><p>You prefer <strong>typed exceptions</strong> over SDK-specific error handling</p></li>
<li><p>You want <strong>retry logic built-in</strong> rather than implementing your own</p></li>
</ul>
</section>
<section id="choose-fastapi-storages-when">
<h3>Choose fastapi-storages when:<a class="headerlink" href="#choose-fastapi-storages-when" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>You only need <strong>basic S3 or filesystem storage</strong></p></li>
<li><p>You are using <strong>SQLAlchemy ORM</strong> and want FileType column integration</p></li>
<li><p>Your application is <strong>sync</strong> or you don’t mind blocking operations</p></li>
<li><p>You have <strong>simple storage needs</strong> without progress tracking or multipart uploads</p></li>
</ul>
</section>
<section id="choose-django-storages-when">
<h3>Choose django-storages when:<a class="headerlink" href="#choose-django-storages-when" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>You are building a <strong>Django application</strong></p></li>
<li><p>You need <strong>Django ORM integration</strong> (FileField, ImageField)</p></li>
<li><p>You require backends like <strong>Dropbox, SFTP, FTP, or Libcloud</strong></p></li>
<li><p>Your application is <strong>sync</strong> (Django’s traditional model)</p></li>
<li><p>You want a <strong>mature, battle-tested</strong> library with extensive community support</p></li>
<li><p>You need to match <strong>existing Django infrastructure</strong></p></li>
</ul>
</section>
</section>
<section id="migration-guide">
<h2>Migration Guide<a class="headerlink" href="#migration-guide" title="Link to this heading">¶</a></h2>
<section id="migrating-from-django-storages">
<h3>Migrating from django-storages<a class="headerlink" href="#migrating-from-django-storages" title="Link to this heading">¶</a></h3>
<p>If you’re moving from Django to an async framework like Litestar:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="c1"># django-storages (before)</span>
</span><span data-line="2"><span class="kn">from</span><span class="w"> </span><span class="nn">django.core.files.storage</span><span class="w"> </span><span class="kn">import</span> <span class="n">default_storage</span>
</span><span data-line="3">
</span><span data-line="4"><span class="n">path</span> <span class="o">=</span> <span class="n">default_storage</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;uploads/file.txt&quot;</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>
</span><span data-line="5"><span class="n">url</span> <span class="o">=</span> <span class="n">default_storage</span><span class="o">.</span><span class="n">url</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span data-line="6">
</span><span data-line="7"><span class="c1"># litestar-storages (after)</span>
</span><span data-line="8"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar_storages</span><span class="w"> </span><span class="kn">import</span> <span class="n">S3Storage</span><span class="p">,</span> <span class="n">S3Config</span>
</span><span data-line="9">
</span><span data-line="10"><span class="n">storage</span> <span class="o">=</span> <span class="n">S3Storage</span><span class="p">(</span><span class="n">S3Config</span><span class="p">(</span><span class="n">bucket</span><span class="o">=</span><span class="s2">&quot;my-bucket&quot;</span><span class="p">))</span>
</span><span data-line="11"><span class="n">stored</span> <span class="o">=</span> <span class="k">await</span> <span class="n">storage</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;uploads/file.txt&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</span><span data-line="12"><span class="n">url</span> <span class="o">=</span> <span class="k">await</span> <span class="n">storage</span><span class="o">.</span><span class="n">url</span><span class="p">(</span><span class="n">stored</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>
</span></pre></div>
</div>
<p>Key differences:</p>
<ul class="simple">
<li><p>All operations are <code class="docutils literal notranslate"><span class="pre">async</span></code> - add <code class="docutils literal notranslate"><span class="pre">await</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">save()</span></code> becomes <code class="docutils literal notranslate"><span class="pre">put()</span></code> returning <code class="docutils literal notranslate"><span class="pre">StoredFile</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">open()</span></code> becomes <code class="docutils literal notranslate"><span class="pre">get()</span></code> returning <code class="docutils literal notranslate"><span class="pre">AsyncIterator[bytes]</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">delete()</span></code> stays the same (but async)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exists()</span></code> stays the same (but async)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">url()</span></code> becomes async with optional <code class="docutils literal notranslate"><span class="pre">expires_in</span></code> parameter</p></li>
</ul>
</section>
<section id="migrating-from-fastapi-storages">
<h3>Migrating from fastapi-storages<a class="headerlink" href="#migrating-from-fastapi-storages" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="c1"># fastapi-storages (before)</span>
</span><span data-line="2"><span class="kn">from</span><span class="w"> </span><span class="nn">fastapi_storages</span><span class="w"> </span><span class="kn">import</span> <span class="n">FileSystemStorage</span>
</span><span data-line="3">
</span><span data-line="4"><span class="n">storage</span> <span class="o">=</span> <span class="n">FileSystemStorage</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s2">&quot;/uploads&quot;</span><span class="p">)</span>
</span><span data-line="5"><span class="n">storage</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>
</span><span data-line="6">
</span><span data-line="7"><span class="c1"># litestar-storages (after)</span>
</span><span data-line="8"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar_storages</span><span class="w"> </span><span class="kn">import</span> <span class="n">FileSystemStorage</span><span class="p">,</span> <span class="n">FileSystemConfig</span>
</span><span data-line="9">
</span><span data-line="10"><span class="n">storage</span> <span class="o">=</span> <span class="n">FileSystemStorage</span><span class="p">(</span><span class="n">FileSystemConfig</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s2">&quot;/uploads&quot;</span><span class="p">))</span>
</span><span data-line="11"><span class="k">await</span> <span class="n">storage</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>
</span></pre></div>
</div>
<p>Key differences:</p>
<ul class="simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">await</span></code> to all operations</p></li>
<li><p>Use config dataclasses instead of constructor arguments</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write()</span></code> becomes <code class="docutils literal notranslate"><span class="pre">put()</span></code></p></li>
<li><p>Access to additional features: progress callbacks, retry logic, streaming</p></li>
</ul>
</section>
</section>
<section id="performance-considerations">
<h2>Performance Considerations<a class="headerlink" href="#performance-considerations" title="Link to this heading">¶</a></h2>
<section id="async-performance-benefits">
<h3>Async Performance Benefits<a class="headerlink" href="#async-performance-benefits" title="Link to this heading">¶</a></h3>
<p>In benchmarks, async storage operations show significant advantages for concurrent workloads:</p>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 40.0%" />
<col style="width: 30.0%" />
<col style="width: 30.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Scenario</p></th>
<th class="head"><p>Sync (blocking)</p></th>
<th class="head"><p>Async (litestar-storages)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>100 concurrent uploads (1MB each)</p></td>
<td><p>~100 threads needed</p></td>
<td><p>Single event loop</p></td>
</tr>
<tr class="row-odd"><td><p>Memory per connection</p></td>
<td><p>Thread stack (~1MB)</p></td>
<td><p>Coroutine (~2KB)</p></td>
</tr>
<tr class="row-even"><td><p>Context switching</p></td>
<td><p>OS-level (expensive)</p></td>
<td><p>User-level (cheap)</p></td>
</tr>
<tr class="row-odd"><td><p>I/O wait handling</p></td>
<td><p>Thread blocked</p></td>
<td><p>Other tasks execute</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="connection-pooling">
<h3>Connection Pooling<a class="headerlink" href="#connection-pooling" title="Link to this heading">¶</a></h3>
<p>litestar-storages maintains efficient connection pools for cloud backends:</p>
<ul class="simple">
<li><p><strong>S3</strong>: aioboto3’s AioSession manages connection pooling</p></li>
<li><p><strong>GCS/Azure</strong>: aiohttp ClientSession with configurable pool size</p></li>
<li><p><strong>Filesystem</strong>: aiofiles uses thread pool for non-blocking file I/O</p></li>
</ul>
</section>
<section id="streaming-for-large-files">
<h3>Streaming for Large Files<a class="headerlink" href="#streaming-for-large-files" title="Link to this heading">¶</a></h3>
<p>Avoid memory issues with large files using streaming:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="c1"># Memory-efficient upload from file</span>
</span><span data-line="2"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">upload_large_file</span><span class="p">(</span><span class="n">storage</span><span class="p">:</span> <span class="n">Storage</span><span class="p">,</span> <span class="n">filepath</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StoredFile</span><span class="p">:</span>
</span><span data-line="3">    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">stream_file</span><span class="p">():</span>
</span><span data-line="4">        <span class="k">async</span> <span class="k">with</span> <span class="n">aiofiles</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span data-line="5">            <span class="k">while</span> <span class="n">chunk</span> <span class="o">:=</span> <span class="k">await</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">8192</span><span class="p">):</span>
</span><span data-line="6">                <span class="k">yield</span> <span class="n">chunk</span>
</span><span data-line="7">
</span><span data-line="8">    <span class="k">return</span> <span class="k">await</span> <span class="n">storage</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
</span><span data-line="9">        <span class="n">key</span><span class="o">=</span><span class="n">filepath</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span data-line="10">        <span class="n">data</span><span class="o">=</span><span class="n">stream_file</span><span class="p">(),</span>
</span><span data-line="11">    <span class="p">)</span>
</span><span data-line="12">
</span><span data-line="13"><span class="c1"># Memory-efficient download</span>
</span><span data-line="14"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">download_large_file</span><span class="p">(</span><span class="n">storage</span><span class="p">:</span> <span class="n">Storage</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">dest</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span data-line="15">    <span class="k">async</span> <span class="k">with</span> <span class="n">aiofiles</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">dest</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span data-line="16">        <span class="k">async</span> <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">storage</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
</span><span data-line="17">            <span class="k">await</span> <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
</span></pre></div>
</div>
</section>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Link to this heading">¶</a></h2>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 25.0%" />
<col style="width: 25.0%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>If you need…</p></th>
<th class="head"><p>litestar-storages</p></th>
<th class="head"><p>fastapi-storages</p></th>
<th class="head"><p>django-storages</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Async operations</p></td>
<td><p><strong>Best choice</strong></p></td>
<td><p>Not supported</p></td>
<td><p>Not supported</p></td>
</tr>
<tr class="row-odd"><td><p>Django integration</p></td>
<td><p>Not applicable</p></td>
<td><p>Not applicable</p></td>
<td><p><strong>Best choice</strong></p></td>
</tr>
<tr class="row-even"><td><p>SQLAlchemy ORM types</p></td>
<td><p>Not built-in</p></td>
<td><p><strong>Best choice</strong></p></td>
<td><p>Not applicable</p></td>
</tr>
<tr class="row-odd"><td><p>Progress tracking</p></td>
<td><p><strong>Best choice</strong></p></td>
<td><p>Not supported</p></td>
<td><p>Not supported</p></td>
</tr>
<tr class="row-even"><td><p>Multipart uploads</p></td>
<td><p><strong>Best choice</strong></p></td>
<td><p>Not supported</p></td>
<td><p>Implicit only</p></td>
</tr>
<tr class="row-odd"><td><p>Most backends</p></td>
<td><p>5 backends</p></td>
<td><p>2 backends</p></td>
<td><p><strong>7+ backends</strong></p></td>
</tr>
<tr class="row-even"><td><p>Testing story</p></td>
<td><p><strong>Best choice</strong> (MemoryStorage)</p></td>
<td><p>Mock SDK</p></td>
<td><p>Mock Django</p></td>
</tr>
</tbody>
</table>
</div>
<p>litestar-storages is the best choice for <strong>modern async Python applications</strong> that need
<strong>production-grade file storage</strong> with explicit control over uploads, progress tracking,
and retry logic. Choose django-storages if you’re committed to Django, or fastapi-storages
if you have very simple storage needs with SQLAlchemy integration.</p>
</section>
</section>

        </article><button class="back-to-top" type="button">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
  </svg>
  <span>Back to top</span>
</button><div class="navigation flex print:hidden"><div class="navigation-prev">
    <a href="api/contrib/dto.html">
      <i class="i-lucide chevron-left"></i>
      <div class="page-info">
        <span>Previous</span><div class="title">DTOs</div></div>
    </a>
  </div><div class="navigation-next">
    <a href="changelog.html">
      <div class="page-info">
        <span>Next</span>
        <div class="title">Changelog</div>
      </div>
      <i class="i-lucide chevron-right"></i>
    </a>
  </div></div></div>
    </div>
  </main>
</div>
<footer class="sy-foot">
  <div class="sy-foot-inner sy-container mx-auto">
    <div class="sy-foot-reserved md:flex justify-between items-center">
      <div class="sy-foot-copyright"><p>2025, Jacob Coffee</p>
  
  <p>
    Made with
    
    <a href="https://www.sphinx-doc.org/">Sphinx</a> and
    
    <a href="https://shibuya.lepture.com">Shibuya theme</a>.
  </p>
</div>
      <div class="sy-foot-socials">
<a href="https://github.com/JacobCoffee/litestar-storages" aria-label="GitHub">
  <iconify-icon icon="simple-icons:github"></iconify-icon>
</a></div>
    </div>
  </div>
</footer>
      <script src="_static/documentation_options.js?v=01f34227"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="_static/copybutton.js?v=30646c52"></script>
      <script src="_static/design-tabs.js?v=f930bc37"></script>
      <script src="_static/shibuya.js?v=c1cf1a6b"></script></body>
</html>